# xv6-mods

lottery-sched: A lottery scheduler

Adds three integer fields to the proc structure: tickets, runstart, and runtime.
Adds two system calls, settickets and getpinfo. settickets will change the ticket count of the current process for scheduling purposes. getpinfo() will print, for each running process, their name, ticket count, and runtime.
Modifies usertrap and usertrapret to track the amount of time a user program has spent running, storing it in the runtime field
Modifies scheduler() to use a lottery scheduler algorithm, using each runnable proc's tickets field as their ticket count. Random number is generated by LCG algorithm


cow-fork: Copy-on-write fork

Added PTE\_C permission field (1L<<8). If a user program does not have write permission to a page marked PTE\_C, they may make a copy for themselves to write to instead
Added array `coreview[]` that tracks the number of VA spaces that refer to a given physical page.
Modified mappages() to increment relevant coreview[] entries
Modified uvmunmap() to decrement relevant coreview[] entries. Additionally, will only call kfree() on a given physical page if relevant coreview[] entry is 0.
Replaced uvmcopy() with uvmcopy\_lazy(), which will perform lazy copy of all pages in the caller's address space, forcing caller and callee to copy before writing.

